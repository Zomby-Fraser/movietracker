<!DOCTYPE html>
<html>
<head>
    <title>Your Page Title</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/home.css') }}">
</head>
<body>
    <!-- Header -->
    <div id="header">
        <button id="requestMovieBtn">Request Movie</button>
    </div>

    <!-- Movie Request Modal (hidden initially) -->
    <div id="movieRequestModal" class="modal">
        <div class="modal-content">
            <div class="query-type">
                <input type="radio" id="imdbLinkRadio" name="queryType" value="link">Submit Link
                <input type="radio" id="imdbQueryRadio" name="queryType" value="search" checked>Search
            </div>
            <span class="close" onclick="closeModal()">&times;</span>
    
            <div id="searchFields">
                <label for="movieTitle">Movie Title:</label>
                <input type="text" id="movieTitle" name="movieTitle">
    
                <label for="movieYear">Year:</label>
                <input type="text" id="movieYear" name="movieYear">
            </div>
    
            <div id="linkField" style="display:none;">
                <label for="imdbLink">IMDB Link:</label>
                <input type="text" id="imdbLink" name="imdbLink">
            </div>
    
            <button onclick="submitMovieRequest()">Submit Request</button>
            <table class="imdb-search-table"><tbody id="imdbSearchResuls" class="modal-content imdb-search"></tbody></table>
        </div>
    </div>

    <h1>Manage Movie Requests</h1>
    <table>
        <thead>
            <tr>
                <th>Title</th>
                <th>Year of Release</th>
                <th>Available Sources</th>
                <th>Preferred Source</th>
                <th>Mark as Downloaded</th>
                <th>Comments</th>
            </tr>
        </thead>
        <tbody id="requestedMoviesTable">
            {% for movie in movies %}
            <tr>
                <td>{{ movie.title }}</td>
                <td>{{ movie.year_of_release }}</td>
                <td>
                    {% if movie.download_link %}
                        <a href="{{ movie.download_link }}">Download</a>
                    {% else %}
                        No link available
                    {% endif %}
                </td>
                <td>
                    <div class="source-options">
                        {% for source in movie.sources %}
                            {% if source %}
                                <div class="radio-option">
                                    <label for="source_{{ source.source_key }}"><input class="radio-btn" type="radio" id="source_{{ source.source_key }}" name="source_{{ movie.movie_key }}" value="{{ source.source_name }}" onclick="toggleRadio(this, event)" {% if source['accepted'] %}checked{% endif %}>{{ source.source_name }}</label>
                                </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                </td>
                <td>
                    <button>Mark as Downloaded</button>
                </td>
                <td>
                    File could not be downloaded
                </td>
            </tr>
            {% endfor %}
        </tbody>
                
    </table>
    
    <div id="popup" class="popup"></div>

    <!-- Rest of your page content -->

    <script src="{{ url_for('static', filename='js/home.js') }}"></script>
</body>
</html>
